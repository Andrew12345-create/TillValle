
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Shop - TillValle</title>
  <link rel="stylesheet" href="css/navbar.css">
  <link rel="icon" href="logo.jpg" type="image/jpeg">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&family=Poppins:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="styles.css">
  <link rel="stylesheet" href="shop-styles.css">
  <!-- Hotjar Tracking Code -->
  <script>
    (function(h,o,t,j,a,r){
        h.hj=h.hj||function(){(h.hj.q=h.hj.q||[]).push(arguments)};
        h._hjSettings={hjid:5208839,hjsv:6};
        a=o.getElementsByTagName('head')[0];
        r=o.createElement('script');r.async=1;
        r.src=t+h._hjSettings.hjid+j+h._hjSettings.hjsv;
        a.appendChild(r);
    })(window,document,'https://static.hotjar.com/c/hotjar-','.js?sv=');
  </script>
  <style>
    :root {
      --primary: #2d6a4f;
      --primary-dark: #1b4332;
      --primary-light: #40916c;
      --accent: #ff6b6b;
      --accent-light: #ff9999;
      --text-primary: #0f172a;
      --text-secondary: #64748b;
      --text-light: #94a3b8;
      --bg-primary: #ffffff;
      --bg-secondary: #f8fafc;
      --bg-tertiary: #f1f5f9;
      --glass: rgba(255, 255, 255, 0.25);
      --glass-border: rgba(255, 255, 255, 0.18);
      --shadow-sm: 0 1px 2px 0 rgba(0, 0, 0, 0.05);
      --shadow-md: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
      --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
      --shadow-xl: 0 20px 25px -5px rgba(0, 0, 0, 0.1);
      --shadow-2xl: 0 25px 50px -12px rgba(0, 0, 0, 0.25);
      --gradient-primary: linear-gradient(135deg, var(--primary) 0%, var(--primary-light) 100%);
      --gradient-accent: linear-gradient(135deg, var(--accent) 0%, var(--accent-light) 100%);
      --gradient-hero: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      --radius-sm: 0.375rem;
      --radius-md: 0.5rem;
      --radius-lg: 0.75rem;
      --radius-xl: 1rem;
      --radius-2xl: 1.5rem;
    }

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    html {
      scroll-behavior: smooth;
    }

    body {
      font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
      line-height: 1.6;
      color: var(--text-primary);
      background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
      overflow-x: hidden;
    }

    /* Loading Screen */
    #loading-screen {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: var(--gradient-hero);
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      z-index: 9999;
      transition: opacity 0.5s ease;
    }

    .loading-content {
      text-align: center;
      color: white;
    }

    .loading-logo {
      width: 80px;
      height: 80px;
      background: url('logo.jpg') center/cover;
      border-radius: 50%;
      margin-bottom: 20px;
      animation: pulse 2s infinite;
    }

    .loading-text {
      font-size: 1.5rem;
      font-weight: 600;
      margin-bottom: 10px;
    }

    .loading-spinner {
      width: 40px;
      height: 40px;
      border: 4px solid rgba(255, 255, 255, 0.3);
      border-top: 4px solid white;
      border-radius: 50%;
      animation: spin 1s linear infinite;
    }

    @keyframes pulse {
      0%, 100% { transform: scale(1); }
      50% { transform: scale(1.1); }
    }

    @keyframes spin {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }

    /* Button style */
    .btn {
      display: inline-block;
      padding: 12px 24px;
      background: var(--accent);
      color: white;
      text-decoration: none;
      border-radius: var(--radius-md);
      font-weight: 600;
      transition: all 0.3s ease;
    }

    .btn:hover {
      background: var(--accent-light);
      transform: translateY(-2px);
    }
  </style>

  <script>
    // Load navbar
    fetch('navbar.html')
      .then(response => response.text())
      .then(data => {
        document.getElementById('navbar-container').innerHTML = data;
      });
  </script>
</head>
<body>
  <div id="navbar-container"></div>

  <section class="shop-section">
    <h2>Fresh Farm Produce</h2>
    
    <!-- Category: Animal & Farm Produce -->
    <div class="category">
      <h3 class="category-title">Animal & Farm Produce</h3>
      <div class="products animal-farm">
  <div class="product" data-name="Fresh Milk" data-description="Pure, fresh milk from our farm." data-image="milk.png" data-price="120"><img src="milk.png" alt="Fresh Milk" class="product-image"><h4>Fresh Milk</h4><p class="price" data-price="120">KES 120 / liter</p><div class="product-controls"><button class="product-btn" data-action="remove" data-name="Fresh Milk">âˆ’</button><span class="product-quantity" id="qty-Fresh-Milk">0</span><button class="product-btn" data-action="add" data-name="Fresh Milk" data-price="120" data-image="milk.png">+</button></div></div>
  <div class="product" data-name="Free-Range Chicken" data-description="Healthy, free-range chicken." data-image="chicken.png" data-price="800"><img src="chicken.png" alt="Free-Range Chicken" class="product-image"><h4>Free-Range Chicken</h4><p class="price" data-price="800">KES 800 / kg</p><div class="product-controls"><button class="product-btn" data-action="remove" data-name="Free-Range Chicken">âˆ’</button><span class="product-quantity" id="qty-Free-Range-Chicken">0</span><button class="product-btn" data-action="add" data-name="Free-Range Chicken" data-price="800" data-image="chicken.png">+</button></div></div>
  <div class="product" data-name="Farm Fresh Eggs" data-description="Fresh eggs from free-range chickens." data-image="eggs.png" data-price="25"><img src="eggs.png" alt="Farm Fresh Eggs" class="product-image"><h4>Farm Fresh Eggs</h4><p class="price" data-price="25">KES 25 / piece</p><div class="product-controls"><button class="product-btn" data-action="remove" data-name="Farm Fresh Eggs">âˆ’</button><span class="product-quantity" id="qty-Farm-Fresh-Eggs">0</span><button class="product-btn" data-action="add" data-name="Farm Fresh Eggs" data-price="25" data-image="eggs.png">+</button></div></div>
  <div class="product" data-name="Pure Ghee" data-description="Traditional clarified butter." data-image="ghee.png" data-price="600"><img src="ghee.png" alt="Pure Ghee" class="product-image"><h4>Pure Ghee</h4><p class="price" data-price="600">KES 600 / 500g</p><div class="product-controls"><button class="product-btn" data-action="remove" data-name="Pure Ghee">âˆ’</button><span class="product-quantity" id="qty-Pure-Ghee">0</span><button class="product-btn" data-action="add" data-name="Pure Ghee" data-price="600" data-image="ghee.png">+</button></div></div>
  <div class="product" data-name="Honey" data-description="Pure, natural honey from local beekeepers." data-image="honey.png" data-price="400"><img src="honey.png" alt="Honey" class="product-image"><h4>Honey</h4><p class="price" data-price="400">KES 400 / 500g</p><div class="product-controls"><button class="product-btn" data-action="remove" data-name="Honey">âˆ’</button><span class="product-quantity" id="qty-Honey">0</span><button class="product-btn" data-action="add" data-name="Honey" data-price="400" data-image="honey.png">+</button></div></div>
      </div>
    </div>

    <!-- Category: Fruits -->
    <div class="category">
      <h3 class="category-title">Fruits</h3>
      <div class="products">
  <div class="product" data-name="Bananas" data-description="Fresh bananas, perfect for snacking." data-image="bananas-ripe.png" data-price="150"><img src="bananas-ripe.png" alt="Bananas" class="product-image"><h4>Bananas</h4><p class="price" data-price="150">KES 150 / bunch</p><div class="product-controls"><button class="product-btn" data-action="remove" data-name="Bananas">âˆ’</button><span class="product-quantity" id="qty-Bananas">0</span><button class="product-btn" data-action="add" data-name="Bananas" data-price="150" data-image="bananas-ripe.png">+</button></div></div>
  <div class="product" data-name="Oranges" data-description="Juicy oranges, rich in vitamin C." data-image="oranges.png" data-price="200"><img src="oranges.png" alt="Oranges" class="product-image"><h4>Oranges</h4><p class="price" data-price="200">KES 200 / kg</p><div class="product-controls"><button class="product-btn" data-action="remove" data-name="Oranges">âˆ’</button><span class="product-quantity" id="qty-Oranges">0</span><button class="product-btn" data-action="add" data-name="Oranges" data-price="200" data-image="oranges.png">+</button></div></div>

  <div class="product" data-name="Watermelon" data-description="Sweet watermelon, perfect for hot days." data-image="watermelon.png" data-price="250"><img src="watermelon.png" alt="Watermelon" class="product-image"><h4>Watermelon</h4><p class="price" data-price="250">KES 250 / piece</p><div class="product-controls"><button class="product-btn" data-action="remove" data-name="Watermelon">âˆ’</button><span class="product-quantity" id="qty-Watermelon">0</span><button class="product-btn" data-action="add" data-name="Watermelon" data-price="250" data-image="watermelon.png">+</button></div></div>
  <div class="product" data-name="Mangoes" data-description="Juicy mangoes, perfect for summer." data-image="mangoes.png" data-price="40"><img src="mangoes.png" alt="Mangoes" class="product-image"><h4>Mangoes</h4><p class="price" data-price="40">KES 40 / piece</p><div class="product-controls"><button class="product-btn" data-action="remove" data-name="Mangoes">âˆ’</button><span class="product-quantity" id="qty-Mangoes">0</span><button class="product-btn" data-action="add" data-name="Mangoes" data-price="40" data-image="mangoes.png">+</button></div></div>
  <div class="product" data-name="Lemon" data-description="Fresh lemons for cooking and drinks." data-image="lemon.png" data-price="20"><img src="lemon.png" alt="Lemon" class="product-image"><h4>Lemon</h4><p class="price" data-price="20">KES 20 / piece</p><div class="product-controls"><button class="product-btn" data-action="remove" data-name="Lemon">âˆ’</button><span class="product-quantity" id="qty-Lemon">0</span><button class="product-btn" data-action="add" data-name="Lemon" data-price="20" data-image="lemon.png">+</button></div></div>
  <div class="product" data-name="Pawpaw" data-description="Sweet pawpaw fruit, rich in vitamins." data-image="pawpaw.png" data-price="120"><img src="pawpaw.png" alt="Pawpaw" class="product-image"><h4>Pawpaw</h4><p class="price" data-price="120">KES 120 / piece</p><div class="product-controls"><button class="product-btn" data-action="remove" data-name="Pawpaw">âˆ’</button><span class="product-quantity" id="qty-Pawpaw">0</span><button class="product-btn" data-action="add" data-name="Pawpaw" data-price="120" data-image="pawpaw.png">+</button></div></div>
  <div class="product" data-name="Pixies" data-description="Mini sweet oranges, great for snacking." data-image="pixies.png" data-price="35"><img src="pixies.png" alt="Pixies" class="product-image"><h4>Pixies</h4><p class="price" data-price="35">KES 35 / piece</p><div class="product-controls"><button class="product-btn" data-action="remove" data-name="Pixies">âˆ’</button><span class="product-quantity" id="qty-Pixies">0</span><button class="product-btn" data-action="add" data-name="Pixies" data-price="35" data-image="pixies.png">+</button></div></div>
  <div class="product" data-name="Avocadoes" data-description="Creamy avocados for healthy eating." data-image="avocadoes.png" data-price="30"><img src="avocadoes.png" alt="Avocadoes" class="product-image"><h4>Avocadoes</h4><p class="price" data-price="30">KES 30 / piece</p><div class="product-controls"><button class="product-btn" data-action="remove" data-name="Avocadoes">âˆ’</button><span class="product-quantity" id="qty-Avocadoes">0</span><button class="product-btn" data-action="add" data-name="Avocadoes" data-price="30" data-image="avocadoes.png">+</button></div></div>
  <div class="product" data-name="Yellow Passion" data-description="Tangy passion fruit for juices." data-image="yellow-passion.png" data-price="25"><img src="yellow-passion.png" alt="Yellow Passion" class="product-image"><h4>Yellow Passion</h4><p class="price" data-price="25">KES 25 / piece</p><div class="product-controls"><button class="product-btn" data-action="remove" data-name="Yellow Passion">âˆ’</button><span class="product-quantity" id="qty-Yellow-Passion">0</span><button class="product-btn" data-action="add" data-name="Yellow Passion" data-price="25" data-image="yellow-passion.png">+</button></div></div>
  <div class="product" data-name="Kiwi" data-description="Nutritious kiwi fruit, full of vitamin C." data-image="kiwi.png" data-price="60"><img src="kiwi.png" alt="Kiwi" class="product-image"><h4>Kiwi</h4><p class="price" data-price="60">KES 60 / piece</p><div class="product-controls"><button class="product-btn" data-action="remove" data-name="Kiwi">âˆ’</button><span class="product-quantity" id="qty-Kiwi">0</span><button class="product-btn" data-action="add" data-name="Kiwi" data-price="60" data-image="kiwi.png">+</button></div></div>
  <div class="product" data-name="Raw Bananas" data-description="Green bananas for cooking." data-image="raw-bananas.png" data-price="100"><img src="raw-bananas.png" alt="Raw Bananas" class="product-image"><h4>Raw Bananas</h4><p class="price" data-price="100">KES 100 / bunch</p><div class="product-controls"><button class="product-btn" data-action="remove" data-name="Raw Bananas">âˆ’</button><span class="product-quantity" id="qty-Raw-Bananas">0</span><button class="product-btn" data-action="add" data-name="Raw Bananas" data-price="100" data-image="raw-bananas.png">+</button></div></div>
  <div class="product" data-name="Dragon Fruit" data-description="Exotic dragon fruit, sweet and nutritious." data-image="dragonfruit.png" data-price="300"><img src="dragonfruit.png" alt="Dragon Fruit" class="product-image"><h4>Dragon Fruit</h4><p class="price" data-price="300">KES 300 / piece</p><div class="product-controls"><button class="product-btn" data-action="remove" data-name="Dragon Fruit">âˆ’</button><span class="product-quantity" id="qty-Dragon-Fruit">0</span><button class="product-btn" data-action="add" data-name="Dragon Fruit" data-price="300" data-image="dragonfruit.png">+</button></div></div>
  <div class="product" data-name="Soursop" data-description="Tropical soursop fruit, great for juices." data-image="soursop.png" data-price="250"><img src="soursop.png" alt="Soursop" class="product-image"><h4>Soursop</h4><p class="price" data-price="250">KES 250 / piece</p><div class="product-controls"><button class="product-btn" data-action="remove" data-name="Soursop">âˆ’</button><span class="product-quantity" id="qty-Soursop">0</span><button class="product-btn" data-action="add" data-name="Soursop" data-price="250" data-image="soursop.png">+</button></div></div>
      </div>
    </div>

    <!-- Category: Herbs -->
    <div class="category">
      <h3 class="category-title">Herbs</h3>
      <div class="products">
  <div class="product" data-name="Basil" data-description="Fresh basil leaves for cooking." data-image="basil.png" data-price="50"><img src="basil.png" alt="Basil" class="product-image"><h4>Basil</h4><p class="price" data-price="50">KES 50 / bunch</p><div class="product-controls"><button class="product-btn" data-action="remove" data-name="Basil">âˆ’</button><span class="product-quantity" id="qty-Basil">0</span><button class="product-btn" data-action="add" data-name="Basil" data-price="50" data-image="basil.png">+</button></div></div>
  <div class="product" data-name="Coriander" data-description="Aromatic coriander leaves and seeds." data-image="coriander.png" data-price="30"><img src="coriander.png" alt="Coriander" class="product-image"><h4>Coriander</h4><p class="price" data-price="30">KES 30 / bunch</p><div class="product-controls"><button class="product-btn" data-action="remove" data-name="Coriander">âˆ’</button><span class="product-quantity" id="qty-Coriander">0</span><button class="product-btn" data-action="add" data-name="Coriander" data-price="30" data-image="coriander.png">+</button></div></div>
  <div class="product" data-name="Mint" data-description="Fresh mint leaves for cooking and drinks." data-image="mint.png" data-price="40"><img src="mint.png" alt="Mint" class="product-image"><h4>Mint</h4><p class="price" data-price="40">KES 40 / bunch</p><div class="product-controls"><button class="product-btn" data-action="remove" data-name="Mint">âˆ’</button><span class="product-quantity" id="qty-Mint">0</span><button class="product-btn" data-action="add" data-name="Mint" data-price="40" data-image="mint.png">+</button></div></div>
  <div class="product" data-name="Parsley" data-description="Fresh parsley leaves for cooking." data-image="parsley.png" data-price="35"><img src="parsley.png" alt="Parsley" class="product-image"><h4>Parsley</h4><p class="price" data-price="35">KES 35 / bunch</p><div class="product-controls"><button class="product-btn" data-action="remove" data-name="Parsley">âˆ’</button><span class="product-quantity" id="qty-Parsley">0</span><button class="product-btn" data-action="add" data-name="Parsley" data-price="35" data-image="parsley.png">+</button></div></div>
  <div class="product" data-name="Soursop Leaves" data-description="Medicinal soursop leaves." data-image="soursop-herbs.png" data-price="200"><img src="soursop-herbs.png" alt="Soursop Leaves" class="product-image"><h4>Soursop Leaves</h4><p class="price" data-price="200">from KES 200</p><div class="product-controls"><button class="product-btn" data-action="remove" data-name="Soursop Leaves">âˆ’</button><span class="product-quantity" id="qty-Soursop-Leaves">0</span><button class="product-btn" data-action="add" data-name="Soursop Leaves" data-price="200" data-image="soursop-herbs.png">+</button></div></div>
      </div>
    </div>

    <!-- Category: Vegetables & Greens -->
    <div class="category">
      <h3 class="category-title">Vegetables & Greens</h3>
      <div class="products">
  <div class="product" data-name="Kales (Sukuma Wiki)" data-description="Nutritious kales, perfect for sukuma wiki." data-image="kales.png" data-price="30"><img src="kales.png" alt="Kales (Sukuma Wiki)" class="product-image"><h4>Kales (Sukuma Wiki)</h4><p class="price" data-price="30">KES 30 / bunch</p><div class="product-controls"><button class="product-btn" data-action="remove" data-name="Kales (Sukuma Wiki)">âˆ’</button><span class="product-quantity" id="qty-Kales-(Sukuma-Wiki)">0</span><button class="product-btn" data-action="add" data-name="Kales (Sukuma Wiki)" data-price="30" data-image="kales.png">+</button></div></div>
  <div class="product" data-name="Lettuce" data-description="Fresh, crisp lettuce for salads." data-image="lettuce.png" data-price="80"><img src="lettuce.png" alt="Lettuce" class="product-image"><h4>Lettuce</h4><p class="price" data-price="80">KES 80 / head</p><div class="product-controls"><button class="product-btn" data-action="remove" data-name="Lettuce">âˆ’</button><span class="product-quantity" id="qty-Lettuce">0</span><button class="product-btn" data-action="add" data-name="Lettuce" data-price="80" data-image="lettuce.png">+</button></div></div>
  <div class="product" data-name="Managu" data-description="Traditional African vegetable." data-image="managu.png" data-price="40"><img src="managu.png" alt="Managu" class="product-image"><h4>Managu</h4><p class="price" data-price="40">KES 40 / bunch</p><div class="product-controls"><button class="product-btn" data-action="remove" data-name="Managu">âˆ’</button><span class="product-quantity" id="qty-Managu">0</span><button class="product-btn" data-action="add" data-name="Managu" data-price="40" data-image="managu.png">+</button></div></div>
  <div class="product" data-name="Terere" data-description="Fresh terere leaves for cooking." data-image="terere.png" data-price="40"><img src="terere.png" alt="Terere" class="product-image"><h4>Terere</h4><p class="price" data-price="40">KES 40 / bunch</p><div class="product-controls"><button class="product-btn" data-action="remove" data-name="Terere">âˆ’</button><span class="product-quantity" id="qty-Terere">0</span><button class="product-btn" data-action="add" data-name="Terere" data-price="40" data-image="terere.png">+</button></div></div>
  <div class="product" data-name="Salgaa" data-description="Fresh salgaa for traditional dishes." data-image="salgaa.png" data-price="20"><img src="salgaa.png" alt="Salgaa" class="product-image"><h4>Salgaa</h4><p class="price" data-price="20">KES 20 / bunch</p><div class="product-controls"><button class="product-btn" data-action="remove" data-name="Salgaa">âˆ’</button><span class="product-quantity" id="qty-Salgaa">0</span><button class="product-btn" data-action="add" data-name="Salgaa" data-price="20" data-image="salgaa.png">+</button></div></div>
  <div class="product" data-name="Spinach" data-description="Fresh spinach leaves, rich in iron." data-image="spinach.png" data-price="30"><img src="spinach.png" alt="Spinach" class="product-image"><h4>Spinach</h4><p class="price" data-price="30">KES 30 / bunch</p><div class="product-controls"><button class="product-btn" data-action="remove" data-name="Spinach">âˆ’</button><span class="product-quantity" id="qty-Spinach">0</span><button class="product-btn" data-action="add" data-name="Spinach" data-price="30" data-image="spinach.png">+</button></div></div>
  <div class="product" data-name="Cauliflower" data-description="Fresh cauliflower, perfect for healthy meals." data-image="cauliflower.png" data-price="80"><img src="cauliflower.png" alt="Cauliflower" class="product-image"><h4>Cauliflower</h4><p class="price" data-price="80">KES 80 / head</p><div class="product-controls"><button class="product-btn" data-action="remove" data-name="Cauliflower">âˆ’</button><span class="product-quantity" id="qty-Cauliflower">0</span><button class="product-btn" data-action="add" data-name="Cauliflower" data-price="80" data-image="cauliflower.png">+</button></div></div>
  <div class="product" data-name="Broccoli" data-description="Nutritious broccoli, rich in vitamins." data-image="broccoli.png" data-price="70"><img src="broccoli.png" alt="Broccoli" class="product-image"><h4>Broccoli</h4><p class="price" data-price="70">KES 70 / head</p><div class="product-controls"><button class="product-btn" data-action="remove" data-name="Broccoli">âˆ’</button><span class="product-quantity" id="qty-Broccoli">0</span><button class="product-btn" data-action="add" data-name="Broccoli" data-price="70" data-image="broccoli.png">+</button></div></div>
  <div class="product" data-name="Kunde" data-description="Fresh kunde leaves for traditional dishes." data-image="kunde.png" data-price="40"><img src="kunde.png" alt="Kunde" class="product-image"><h4>Kunde</h4><p class="price" data-price="40">KES 40 / bunch</p><div class="product-controls"><button class="product-btn" data-action="remove" data-name="Kunde">âˆ’</button><span class="product-quantity" id="qty-Kunde">0</span><button class="product-btn" data-action="add" data-name="Kunde" data-price="40" data-image="kunde.png">+</button></div></div>
      </div>
    </div>
  </section>

  <!-- Product Modal -->
  <div id="product-modal" class="modal">
    <div class="modal-content">
      <button class="close">&times;</button>
      <div class="modal-body">
        <img id="modal-image" src="" alt="" class="modal-image">
        <div class="modal-info">
          <h3 id="modal-title"></h3>
          <p id="modal-description"></p>
          <div id="modal-price" class="modal-price"></div>
          <div class="quantity-selector">
            <label for="quantity">Select Quantity</label>
            <div class="quantity-controls">
              <button type="button" class="quantity-btn" onclick="decreaseQuantity()">âˆ’</button>
              <input type="number" id="quantity" min="1" value="1" readonly>
              <button type="button" class="quantity-btn" onclick="increaseQuantity()">+</button>
            </div>
          </div>
          <button id="add-to-cart-btn" class="add-to-cart-btn">ğŸ›’ Add to Cart</button>
        </div>
      </div>
    </div>
  </div>

  <footer>
    <p>&copy; 2025 TillValle. All rights reserved.</p>
  </footer>

  <!-- Chat Button -->
  <div id="chat-btn">ğŸ’¬</div>
  
  <!-- Chat Window -->
  <div id="chat-window">
    <div id="chat-header">
      <span>TillValle Chat</span>
      <button id="chat-close">Ã—</button>
    </div>
    <div id="chat-messages">
      <div class="bot-msg">ğŸŒ± Hi! I'm TillieBot, your smart farming assistant! I can help you with:
      <br><br>ğŸ“¦ <strong>Product Info</strong> - Ask about any product
      <br>ğŸšš <strong>Delivery</strong> - Shipping & delivery details  
      <br>ğŸ’° <strong>Pricing</strong> - Current prices & offers
      <br>ğŸ›’ <strong>Orders</strong> - Help with your cart
      <br>ğŸ‘¨ğŸŒ¾ <strong>Farming Tips</strong> - Growing advice
      <br><br>What would you like to know?</div>
    </div>
    <div id="chat-input-area">
      <input type="text" id="chat-input" placeholder="Type your message...">
      <button id="chat-send">Send</button>
    </div>
  </div>



  <script>
    // Load navbar
    fetch('navbar.html')
      .then(response => response.text())
      .then(data => {
        document.getElementById('navbar-container').innerHTML = data;
      });
    
    // Chatbot functionality - defensive bindings
    const chatBtn = document.getElementById('chat-btn');
    const chatWindow = document.getElementById('chat-window');
    const chatClose = document.getElementById('chat-close');
    if (chatBtn && chatWindow) {
      chatBtn.addEventListener('click', function(){
        chatWindow.style.display = 'flex';
        chatBtn.style.display = 'none';
      });
    }
    if (chatClose && chatWindow && chatBtn) {
      chatClose.addEventListener('click', function(){
        chatWindow.style.display = 'none';
        chatBtn.style.display = 'flex';
      });
    }
    
    function sendMessage() {
      const input = document.getElementById('chat-input');
      const messages = document.getElementById('chat-messages');
      const message = input.value.trim().toLowerCase();
      
      if (!message) return;
      
  // Append user message safely using textContent to avoid HTML injection
  const userMsgDiv = document.createElement('div');
  userMsgDiv.className = 'user-msg';
  userMsgDiv.textContent = input.value;
  messages.appendChild(userMsgDiv);
  input.value = '';
      
  // Show typing indicator
  const typing = document.createElement('div');
  typing.className = 'typing-indicator show';
  typing.textContent = 'ğŸ¤– TillieBot is typing...';
      messages.appendChild(typing);
      messages.scrollTop = messages.scrollHeight;
      
      setTimeout(() => {
        typing.remove();
        let response = getSmartResponse(message);
  // Append bot response. Responses originate from site logic, so innerHTML is intentional
  const botMsgDiv = document.createElement('div');
  botMsgDiv.className = 'bot-msg';
  botMsgDiv.innerHTML = response;
  messages.appendChild(botMsgDiv);
  messages.scrollTop = messages.scrollHeight;
      }, 1500);
    }
    
    function getSmartResponse(message) {
      if (message.includes('milk') || message.includes('dairy')) {
        return 'ğŸ¥› <strong>Fresh Milk</strong> - KES 120/liter<br>Our milk comes from free-range cows in Gilgil. Rich in calcium and delivered fresh daily! Would you like to add some to your cart?';
      }
      if (message.includes('egg') || message.includes('chicken')) {
        return 'ğŸ¥š <strong>Farm Fresh Eggs</strong> - KES 25/piece<br>ğŸ” <strong>Free-Range Chicken</strong> - KES 800/kg<br>Both from happy, healthy chickens! Perfect for protein-rich meals.';
      }
      if (message.includes('fruit') || message.includes('mango') || message.includes('banana')) {
        return 'ğŸŒ <strong>Fresh Fruits Available:</strong><br>â€¢ Bananas - KES 150/bunch<br>â€¢ Mangoes - KES 40/piece<br>â€¢ Avocados - KES 30/piece<br>All picked fresh from our partner farms!';
      }
      if (message.includes('vegetable') || message.includes('kale') || message.includes('spinach')) {
        return 'ğŸ¥¬ <strong>Fresh Vegetables:</strong><br>â€¢ Kales (Sukuma Wiki) - KES 30/bunch<br>â€¢ Spinach - KES 30/bunch<br>â€¢ Lettuce - KES 80/head<br>Packed with nutrients and harvested daily!';
      }
      if (message.includes('deliver') || message.includes('shipping')) {
        return 'ğŸšš <strong>Delivery Info:</strong><br>â€¢ Nairobi: KES 200 (Same day)<br>â€¢ Kiambu: KES 150<br>â€¢ Free delivery on orders over KES 2000!';
      }
      if (message.includes('price') || message.includes('cost')) {
        return 'ğŸ’° <strong>Our Pricing:</strong><br>We offer competitive farm-to-table prices! Check our current rates above. Bulk discounts available!';
      }
      if (message.includes('order') || message.includes('cart')) {
        return 'ğŸ›’ <strong>Order Help:</strong><br>Click any product above to view details and add to cart. Need help with checkout?';
      }
      if (message.includes('contact') || message.includes('support')) {
        return 'ğŸ“ <strong>Contact:</strong> support@tillvalle.com<br>ğŸ“± <strong>WhatsApp:</strong> +254 700 123 456';
      }
      return 'ğŸ¤” I can help with product info, pricing, delivery, and orders. What would you like to know?';
    }
    
    const chatSendBtn = document.getElementById('chat-send');
    const chatInput = document.getElementById('chat-input');
    if (chatSendBtn) chatSendBtn.addEventListener('click', sendMessage);
    if (chatInput) chatInput.addEventListener('keypress', function(e){ if (e.key === 'Enter') sendMessage(); });
    
    // Product modal functionality
    let modalCurrentProduct = {};

    function openProductModal(name, description, image, price) {
      modalCurrentProduct = { name, description, image, price };
      
      document.getElementById('modal-title').textContent = name;
      document.getElementById('modal-description').textContent = description;
      document.getElementById('modal-price').textContent = 'KES ' + price;
      document.getElementById('modal-image').src = image;
      document.getElementById('modal-image').alt = name;
      document.getElementById('quantity').value = 1;
      
      const modal = document.getElementById('product-modal');
      modal.style.display = 'flex';
      modal.classList.add('show');
      document.body.style.overflow = 'hidden';
    }
    
    function closeModal() {
      const modal = document.getElementById('product-modal');
      modal.style.display = 'none';
      modal.classList.remove('show');
      document.body.style.overflow = 'auto';
    }
    
    window.closeModal = closeModal;
    
  // Close modal (defensive)
  const closeBtn = document.querySelector('.close');
  if (closeBtn) closeBtn.addEventListener('click', closeModal);
    
    // Close modal when clicking outside
    window.onclick = function(event) {
      const modal = document.getElementById('product-modal');
      if (event.target === modal) {
        closeModal();
      }
    };
    
    // Quantity controls
    window.increaseQuantity = function() {
      const input = document.getElementById('quantity');
      input.value = parseInt(input.value) + 1;
    };
    
    window.decreaseQuantity = function() {
      const input = document.getElementById('quantity');
      if (parseInt(input.value) > 1) {
        input.value = parseInt(input.value) - 1;
      }
    };
    
    // Add to cart functionality
    const addToCartBtn = document.getElementById('add-to-cart-btn');
    if (addToCartBtn) addToCartBtn.addEventListener('click', function() {
      const quantity = parseInt(document.getElementById('quantity').value);
      if (quantity > 0) {
        // Add animation to button
        const btn = this;
        btn.style.transform = 'scale(0.95)';
        btn.textContent = 'âœ“ Added!';
        
        setTimeout(() => {
          btn.style.transform = 'scale(1)';
          btn.textContent = 'ğŸ›’ Add to Cart';
          closeModal();
        }, 1000);
        
        // Show toast notification
        showToast(`Added ${quantity}x ${modalCurrentProduct.name} to cart!`);
      }
    });
    
  // Toast notification
    function showToast(message) {
      const toast = document.createElement('div');
      toast.style.cssText = `
        position: fixed;
        bottom: 30px;
        right: 30px;
        background: linear-gradient(135deg, #00b894, #00cec9);
        color: white;
        padding: 15px 25px;
        border-radius: 50px;
        box-shadow: 0 8px 25px rgba(0,184,148,0.3);
        z-index: 999999;
        font-weight: 600;
        transform: translateY(100px);
        transition: all 0.3s ease;
      `;
      toast.textContent = message;
      document.body.appendChild(toast);
      
      setTimeout(() => toast.style.transform = 'translateY(0)', 100);
      setTimeout(() => {
        toast.style.transform = 'translateY(100px)';
        setTimeout(() => document.body.removeChild(toast), 300);
      }, 3000);
    }
  </script>

  <script src="navbar-universal.js"></script>
  <script src="script.js" defer></script>
  <script src="global-chat.js"></script>
</body>
</html>