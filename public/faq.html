<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>FAQ - TilleValle</title>
  <link rel="icon" href="logo.jpg" type="image/jpeg">
  <link rel="stylesheet" href="css/site.css">
  <link rel="stylesheet" href="shop-styles.css">
  <style>
    .faq-section {
      max-width: 800px;
      margin: 40px auto;
      padding: 0 20px;
    }
    
    .faq-section h2 {
      color: var(--accent-green);
      font-size: 2.2rem;
      text-align: center;
      margin-bottom: 30px;
    }
    
    .faq-content h3 {
      color: var(--accent-green);
      font-size: 1.5rem;
      margin: 30px 0 20px 0;
      border-bottom: 2px solid var(--accent-green);
      padding-bottom: 10px;
    }
    
    .faq-item {
      background: var(--bg-secondary);
      border-radius: 10px;
      padding: 20px;
      margin-bottom: 15px;
      box-shadow: 0 2px 10px rgba(0,0,0,0.1);
      transition: transform 0.2s ease;
    }
    
    .faq-item:hover {
      transform: translateY(-2px);
    }
    
    .question {
      font-weight: 600;
      font-size: 1.1rem;
      color: var(--text-primary);
      margin-bottom: 10px;
    }
    
    .answer {
      color: var(--text-secondary);
      line-height: 1.6;
      margin: 0;
    }
    
    .back-link {
      color: var(--accent-green);
      text-decoration: none;
      font-size: 1rem;
      transition: color 0.3s ease;
    }
    
    .back-link:hover {
      color: var(--accent-green-light);
    }
  </style>

  <!-- Hotjar Tracking Code for Tillvalle -->
  <script>
      (function(h,o,t,j,a,r){
          h.hj=h.hj||function(){(h.hj.q=h.hj.q||[]).push(arguments)};
          h._hjSettings={hjid:6534945,hjsv:6};
          a=o.getElementsByTagName('head')[0];
          r=o.createElement('script');r.async=1;
          r.src=t+h._hjSettings.hjid+j+h._hjSettings.hjsv;
          a.appendChild(r);
      })(window,document,'https://static.hotjar.com/c/hotjar-','.js?sv=');
  </script>
</head>
<body>
  <header>
    <nav class="navbar">
      <div class="nav-left">
        <a href="index.html" class="nav-link logo-link">
          <img src="logo.jpg" alt="TilleValle Logo" class="logo" />
        </a>
        <a href="shop.html" class="nav-link">Shop</a>
        <a href="about.html" class="nav-link">About</a>
        <a href="contact.html" class="nav-link">Contact</a>
      </div>
      <div class="nav-right">
        <span id="user-area"></span>
        <a href="cart.html" class="nav-link">üõí Cart (<span id="cart-count">0</span>)</a>
      </div>
    </nav>
    <hr>
  </header>

  <main class="profile-container">
    <h1><a href="account.html" class="back-link">‚Üê Back to Account</a></h1>
    
    <section class="faq-section">
      <h2>Frequently Asked Questions</h2>
      <div class="faq-content">
        <h3>Order Questions</h3>
        <div class="faq-item">
          <p class="question">How do I place an order?</p>
          <p class="answer">To place an order, browse our shop, add items to your cart, and proceed to checkout. You'll need to create an account or log in, then enter your shipping and payment information.</p>
        </div>

        <div class="faq-item">
          <p class="question">How can I track my order?</p>
          <p class="answer">Once your order is shipped, you'll receive a tracking number via email. You can also view your order status in your account under Order History.</p>
        </div>

        <div class="faq-item">
          <p class="question">What is your return policy?</p>
          <p class="answer">We offer a 30-day return policy for unused items in original packaging. Contact our customer service team to initiate a return and receive a return shipping label.</p>
        </div>

        <h3>Account Questions</h3>
        <div class="faq-item">
          <p class="question">How do I reset my password?</p>
          <p class="answer">Click on "Forgot Password" on the login page, enter your email address, and follow the instructions sent to your email to reset your password.</p>
        </div>

        <div class="faq-item">
          <p class="question">How do I update my account information?</p>
          <p class="answer">Log in to your account, go to Account Settings, and update your personal information, shipping address, or payment methods as needed.</p>
        </div>

        <h3>Shipping Questions</h3>
        <div class="faq-item">
          <p class="question">What are your shipping options?</p>
          <p class="answer">We offer standard shipping (5-7 business days), express shipping (2-3 business days), and overnight shipping for urgent orders. Shipping costs vary by location and order size.</p>
        </div>

        <div class="faq-item">
          <p class="question">Do you ship internationally?</p>
          <p class="answer">Yes, we ship to most countries worldwide. International shipping costs and delivery times vary by destination. Customs fees may apply for international orders.</p>
        </div>
      </div>
    </section>
  </main>

  <footer>
    <p>&copy; 2025 TilleValle. All rights reserved.</p>
  </footer>

  <!-- Toast -->
  <div id="cart-toast"></div>

  <!-- Chatbot Sidebar -->
  <div id="chatbot-sidebar" class="chatbot-sidebar">
    <div class="chatbot-header">
      <span>TillieBot</span>
      <button id="chatbot-close" class="chatbot-close">&times;</button>
    </div>
    <div id="chatbot-messages" class="chatbot-messages">
      <div class="chatbot-message bot">
        Hello! I'm TillieBot, your TillValle assistant. How can I help you today? You can ask me about our fresh products, delivery, or anything else!
      </div>
    </div>
    <div class="chatbot-input-area">
      <div class="chatbot-input-container">
        <input type="text" id="chatbot-input" class="chatbot-input" placeholder="Type your message...">
        <button id="chatbot-send" class="chatbot-send">‚û§</button>
      </div>
    </div>
  </div>

  <!-- Floating Chatbot Button -->
  <div id="floating-chatbot-btn" class="floating-chatbot-btn">
    <span class="chatbot-emoji">üí¨</span>
  </div>

  <!-- Floating Cart Button -->
  <div id="floating-cart-btn" class="floating-cart-btn">
    <span class="cart-emoji">üõí</span>
    <span id="floating-cart-count" class="floating-cart-count">0</span>
  </div>

  <script src="script.js" defer></script>
  <script>
    // Chatbot functions
    document.addEventListener('DOMContentLoaded', function() {
      const floatingChatbotBtn = document.getElementById('floating-chatbot-btn');
      const chatbotSidebar = document.getElementById('chatbot-sidebar');
      const chatbotClose = document.getElementById('chatbot-close');
      const chatbotSend = document.getElementById('chatbot-send');
      const chatbotInput = document.getElementById('chatbot-input');
      
      if (floatingChatbotBtn) {
        floatingChatbotBtn.addEventListener('click', () => {
          if (chatbotSidebar) chatbotSidebar.classList.add('open');
          floatingChatbotBtn.style.display = 'none';
        });
      }
      if (chatbotClose) {
        chatbotClose.addEventListener('click', () => {
          if (chatbotSidebar) chatbotSidebar.classList.remove('open');
          if (floatingChatbotBtn) floatingChatbotBtn.style.display = 'flex';
        });
      }
      if (chatbotSend) {
        chatbotSend.addEventListener('click', sendMessage);
      }
      if (chatbotInput) {
        chatbotInput.addEventListener('keypress', (e) => {
          if (e.key === 'Enter') sendMessage();
        });
      }
      
      async function sendMessage() {
        const message = chatbotInput.value.trim();
        if (!message) return;
        
  const messagesDiv = document.getElementById('chatbot-messages');
  // Safely append user message
  const userMessageDiv = document.createElement('div');
  userMessageDiv.className = 'chatbot-message user';
  userMessageDiv.textContent = message;
  messagesDiv.appendChild(userMessageDiv);
  chatbotInput.value = '';
  const thinkingDiv = document.createElement('div');
  thinkingDiv.className = 'chatbot-message bot';
  thinkingDiv.textContent = 'Thinking...';
  messagesDiv.appendChild(thinkingDiv);
  const loadingMessage = messagesDiv.lastElementChild;
        messagesDiv.scrollTop = messagesDiv.scrollHeight;
        
        try {
          const isLocal = window.location.hostname === 'localhost' || window.location.hostname === '127.0.0.1';
          const chatbotUrl = isLocal ? 'http://localhost:3001/chatbot' : '/.netlify/functions/chatbot';
          const response = await fetch(chatbotUrl, {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify({ message })
          });
          const data = await response.json();
          if (loadingMessage) loadingMessage.remove();
          const botReply = document.createElement('div');
          botReply.className = 'chatbot-message bot';
          botReply.textContent = data.message;
          messagesDiv.appendChild(botReply);
        } catch (error) {
          if (loadingMessage) loadingMessage.remove();
          const currentLang = localStorage.getItem('selectedLanguage') || 'en';
          const lowerMessage = message.toLowerCase();
          const offlineResponses = {
            en: {
              human: "I'll connect you with our live chat agent Angela Wanjiru at angelawanjiru@gmail.com.",
              default: "Hello! I'm TillieBot from TillValle! üå± I can help you with product information, stock levels, and delivery details. What would you like to know?"
            },
            sw: {
              human: "Nitakuunganisha na wakala wetu Angela Wanjiru kwa angelawanjiru@gmail.com.",
              default: "Hujambo! Mimi ni TillieBot kutoka TillValle! üå± Ninaweza kukusaidia na habari za bidhaa na uongozaji. Unahitaji nini?"
            },
            fr: {
              human: "Je vais vous connecter avec notre agent Angela Wanjiru √† angelawanjiru@gmail.com.",
              default: "Bonjour! Je suis TillieBot de TillValle! üå± Je peux vous aider avec les informations produits et la livraison. Que voulez-vous savoir?"
            }
          };
          const responses = offlineResponses[currentLang] || offlineResponses.en;
          const respDiv = document.createElement('div');
          respDiv.className = 'chatbot-message bot';
          respDiv.textContent = (lowerMessage.includes('human') || lowerMessage.includes('agent') || lowerMessage.includes('live')) ? responses.human : responses.default;
          messagesDiv.appendChild(respDiv);
        }
        messagesDiv.scrollTop = messagesDiv.scrollHeight;
      }
    });
  </script>
</body>
</html>
